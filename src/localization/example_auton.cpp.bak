#include "localization/mcl_chassis.hpp"
#include "main.h"

using namespace localization;

// ─────────────────────────────────────────────────────────
// SETUP — Just like EZ-Template, configure your chassis here.
// ─────────────────────────────────────────────────────────

MCLChassis chassis({1, 2},   // Left motor ports
                   {-3, -4}, // Right motor ports (negative = reversed)
                   5,        // IMU port
                   4.0,      // Wheel diameter (inches)
                   12.5,     // Track width (inches)
                   1.0,      // Gear ratio (1.0 = direct drive)
                   600       // Motor RPM (600 = blue, 200 = green, 100 = red)
);

// ─────────────────────────────────────────────────────────
// INITIALIZATION
// ─────────────────────────────────────────────────────────

void initialize() {
  pros::lcd::initialize();

  // Add distance sensors (port, forward", left", facing°)
  chassis.add_sensor(6, 5, 0, 0);    // Front sensor: 5" forward, facing front
  chassis.add_sensor(7, 0, 5, 90);   // Left sensor: 5" left, facing left
  chassis.add_sensor(8, 0, -5, -90); // Right sensor: 5" right, facing right
  chassis.add_sensor(9, -5, 0, 180); // Back sensor: 5" back, facing back
}

// ─────────────────────────────────────────────────────────
// AUTONOMOUS — Simple and concise, just like EZ-Template!
// ─────────────────────────────────────────────────────────

void example_autonomous() {
  // Set starting position (x, y, heading in degrees)
  chassis.set_pose(24, 24, 0);

  // Drive to a point
  chassis.drive_to(48, 48);

  // Turn to a heading (degrees)
  chassis.turn_to(90);

  // Drive to a specific pose (x, y, heading)
  chassis.pose_to(72, 72, 180);

  // Drive back home
  chassis.drive_to(24, 24);

  // Stop
  chassis.stop();
}

// ─────────────────────────────────────────────────────────
// TELEMETRY — Print position to the brain screen
// ─────────────────────────────────────────────────────────

